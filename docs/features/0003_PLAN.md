# Feature Plan: Enhanced Mind Map Visualization Component

## Description

Replace the current JSON display of mind map data in TranscriptionResults.tsx with a dedicated, user-friendly MindMapCard component that provides interactive node-based visualization using ReactFlow library while maintaining visual consistency with existing components.

## Files to be Changed/Created

### New Files to Create:

- `/yt-scribe/src/components/dashboard/TranscriptionResults/components/MindMapCard.tsx` - Main mind map card wrapper component
- `/yt-scribe/src/components/dashboard/TranscriptionResults/components/MindMapFlow.tsx` - ReactFlow-based visualization component
- `/yt-scribe/src/components/dashboard/TranscriptionResults/components/MindMapNode.tsx` - Custom node component for ReactFlow
- `/yt-scribe/src/utils/mindMapParser.ts` - Utility for converting mindMap data to ReactFlow nodes/edges

### Files to Modify:

- `/yt-scribe/package.json` - Add ReactFlow dependency (`reactflow@^11.11.4`)
- `/yt-scribe/src/components/dashboard/TranscriptionResults/TranscriptionResults.tsx` - Replace current mindMap section (lines 100-122) with new MindMapCard component
- `/yt-scribe/src/components/dashboard/TranscriptionResults/components/index.ts` - Export new MindMapCard component

## Algorithm Implementation

### ReactFlow Mind Map Transformation Algorithm:

1. **Data Structure Analysis**: Parse `Record<string, unknown>` mindMap data to identify hierarchical structure and relationships
2. **Node Generation**: Transform hierarchical data into ReactFlow nodes:
   - Root level keys → Central topic nodes (type: 'rootNode')
   - Nested objects → Branch nodes (type: 'branchNode')
   - Array items → List item nodes (type: 'leafNode')
   - String/number values → Content leaf nodes (type: 'leafNode')
3. **Edge Generation**: Create connections between nodes:
   - Parent-child relationships → smoothstep edges
   - Sibling relationships → straight edges with reduced opacity
4. **Layout Algorithm**: Apply automatic positioning using force-directed layout:
   - Center root nodes in the middle
   - Position branches radially around root
   - Use ReactFlow's built-in layout algorithms for optimal spacing
5. **Interactive Features**:
   - Node expansion/collapse via ReactFlow's node state
   - Zoom and pan capabilities out-of-the-box
   - Node selection and highlighting

### UX Enhancement Strategy:

- **Advanced Color Theory**: Implement split-complementary color scheme using purple base (#8B5CF6) with accent colors:
  - Root nodes: Purple gradient backgrounds
  - Branch nodes: Complementary blue-green tones (#06B6D4)
  - Leaf nodes: Warm accent colors (#F59E0B)
- **Interactive Node Design**: Custom ReactFlow node components with:
  - Glassmorphism styling (backdrop-blur-xl, bg-white/60)
  - Smooth hover states with scale transforms
  - Animated border effects on selection
  - Typography hierarchy within nodes (font-semibold → font-medium → font-normal)
- **Advanced Flow Features**:
  - Smooth edge animations and curved connections
  - Interactive zoom controls and minimap integration
  - Node drag-and-drop repositioning
  - Keyboard navigation support (arrow keys, tab focus)
- **Cognitive Load Reduction**:
  - Progressive disclosure via collapsible node groups
  - Smart edge bundling for complex relationships
  - Contextual node highlighting on hover
  - Overview + detail pattern with minimap

### Component Props Interface:

```typescript
interface MindMapCardProps {
  isLoading: boolean
  mindMap: Record<string, unknown>
}

interface MindMapFlowProps {
  nodes: Node[]
  edges: Edge[]
  onNodesChange: OnNodesChange
  onEdgesChange: OnEdgesChange
  className?: string
}

interface MindMapNodeData {
  label: string
  type: 'root' | 'branch' | 'leaf'
  level: number
  isCollapsed?: boolean
  children?: string[]
}

interface MindMapNodeProps {
  data: MindMapNodeData
  isConnectable: boolean
}

// ReactFlow types
type Node = {
  id: string
  position: { x: number; y: number }
  data: MindMapNodeData
  type: string
}

type Edge = {
  id: string
  source: string
  target: string
  type: 'smoothstep' | 'straight'
  animated?: boolean
}
```

### Styling Consistency:

- Use `CustomCard` as base wrapper component following established patterns
- Apply `backdrop-blur-xl`, `rounded-2xl`, `shadow-lg` styling to card container
- Maintain `Brain` icon from lucide-react with purple-500 color in header
- Include `CopyButton` for JSON export functionality and individual node copying
- Add `SkeletonLoader` support for loading states
- Import ReactFlow CSS: `import 'reactflow/dist/style.css'`
- Constrain ReactFlow container height (e.g., `h-96` or `max-h-[500px]`)

### Technical Requirements:

- **ReactFlow Integration**: Configure ReactFlow with custom node types and edge styles
- **Data Transformation**: Parse `Record<string, unknown>` to ReactFlow-compatible nodes/edges structure
- **Layout Algorithm**: Implement automatic node positioning using radial or hierarchical layouts
- **State Management**: Use ReactFlow's `useNodesState` and `useEdgesState` hooks
- **Performance Optimization**:
  - Memoize node/edge generation functions
  - Lazy load ReactFlow component
  - Limit maximum nodes (fallback to JSON for very large datasets)
- **Responsive Design**:
  - Fixed container dimensions with internal pan/zoom
  - Mobile-friendly touch controls
  - Adaptive node sizes based on content
- **Accessibility**:
  - ARIA labels for nodes and relationships
  - Keyboard navigation support (ReactFlow built-in)
  - High contrast mode compatibility
- **Error Handling**:
  - Graceful fallback to original JSON view for parsing errors
  - Loading states during data transformation
  - Empty state handling for missing mindMap data
- **Browser Compatibility**: Modern browsers supporting ES2015+ (ReactFlow requirement)
